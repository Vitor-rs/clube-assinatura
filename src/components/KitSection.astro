---
import { Image } from 'astro:assets';
import kitImage from '../assets/img/book.png';
import bookIcon from '../assets/img/book.png';
import pinIcon from '../assets/img/pin.png';
import bookmarkIcon from '../assets/img/bookmark-yellow.png';
---
<section aria-label="Kit Mensal" class="bg-gradient-to-b from-pink-light/30 to-pink-dark/30 py-20 overflow-hidden pt-10">
    <div id="kit" class="container mx-auto px-4">
        <h2 class="text-3xl md:text-4xl font-bold text-center text-white mb-12 animate-fade-in">
            <span class="text-blue-light">✦</span> Conheça o kit mensal <span class="text-blue-light">✦</span>
        </h2>

        <div class="flex flex-col md:flex-row items-center justify-center gap-12">
            <div class="w-full md:w-1/2 max-w-md animate-float">
                <Image
                        src={kitImage}
                        alt="Kit mensal Encantos Literários"
                        width={500}
                        height={500}
                        class="w-full h-auto rounded-lg shadow-xl"
                />
            </div>

            <div class="w-full md:w-1/2 max-w-md space-y-8">
                <div class="flex items-start space-x-4 animate-slide-in" style="--delay: 0.2s;">
                    <Image src={bookIcon} alt="Ícone de livro" width={24} height={24} class="animate-pulse" />
                    <div>
                        <h3 class="font-bold text-xl text-purple-400">Livro Surpresa</h3>
                        <p class="text-pink-300">Um livro cuidadosamente selecionado em capa dura para sua coleção.</p>
                    </div>
                </div>

                <div class="flex items-start space-x-4 animate-slide-in" style="--delay: 0.4s;">
                    <Image src={pinIcon} alt="Ícone de broche" width={24} height={24} class="animate-pulse" />
                    <div>
                        <h3 class="font-bold text-xl text-purple-400">Broche Exclusivo</h3>
                        <p class="text-pink-300">Um broche temático para personalizar sua mochila ou estante.</p>
                    </div>
                </div>

                <div class="flex items-start space-x-4 animate-slide-in" style="--delay: 0.6s;">
                    <Image src={bookmarkIcon} alt="Ícone de marcador de página" width={24} height={24} class="animate-pulse" />
                    <div>
                        <h3 class="font-bold text-xl text-purple-400">Marcadores de Página</h3>
                        <p class="text-pink-300">Marcadores temáticos para acompanhar sua leitura com estilo.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    .animate-fade-in {
        opacity: 0;
        animation: fadeIn 1s ease-out forwards;
    }

    .animate-float {
        animation: float 6s ease-in-out infinite;
    }

    .animate-slide-in {
        opacity: 0;
        transform: translateX(50px);
        animation: slideIn 0.8s ease-out forwards;
        animation-delay: var(--delay, 0s);
    }

    .animate-pulse {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    @keyframes fadeIn {
        to { opacity: 1; }
    }

    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-20px); }
    }

    @keyframes slideIn {
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }
</style>

<script>
    function isInViewport(element: HTMLElement) {
        const rect = element.getBoundingClientRect();
        return (
            rect.top >= 0 &&
            rect.left >= 0 &&
            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
            rect.right <= (window.innerWidth || document.documentElement.clientWidth)
        );
    }

    function handleScroll() {
        const animatedElements = document.querySelectorAll('.animate-fade-in, .animate-slide-in');
        animatedElements.forEach((element) => {
            const htmlElement = element as HTMLElement;
            if (isInViewport(htmlElement)) {
                htmlElement.style.animationPlayState = 'running';
            }
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        handleScroll();
        window.addEventListener('scroll', handleScroll);
    });
</script>