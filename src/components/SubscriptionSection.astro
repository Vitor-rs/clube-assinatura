---
import SubscriptionCard from './SubscriptionCard.astro';
---

<section id="planos" class="bg-gradient-to-b from-shape-background to-shape-base py-20 overflow-hidden">
    <div class="container mx-auto px-4">
        <h2 class="text-4xl font-bold text-center text-white mb-12 animate-fade-in">
            <span class="text-blue-light">✦</span> Assinatura Encantos Literários <span class="text-blue-light">✦</span>
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="animate-slide-in" style="--delay: 0.2s;">
                <SubscriptionCard
                        title="Mensal"
                        price="R$ 59,90"
                        yearlyPrice="R$ 718,80"
                        benefits={[
                            "Kit mensal com livro temático",
                            "Broche e marca páginas exclusivo",
                            "Acesso à comunidade literária"
                        ]}
                        ctaText="Assinar mensal"
                />
            </div>
            <div class="animate-slide-in" style="--delay: 0.4s;">
                <SubscriptionCard
                        title="Semestral"
                        price="R$ 52,90"
                        yearlyPrice="R$ 634,80"
                        benefits={[
                            "Kit mensal com livro temático",
                            "Broche e marca páginas exclusivo",
                            "Acesso à comunidade literária",
                            "Membro premium do clube"
                        ]}
                        ctaText="Assinar semestral"
                        isPopular={true}
                />
            </div>
            <div class="animate-slide-in" style="--delay: 0.6s;">
                <SubscriptionCard
                        title="Anual"
                        price="R$ 48,90"
                        yearlyPrice="R$ 586,80"
                        benefits={[
                            "Kit mensal com livro temático",
                            "Broche e marca páginas exclusivo",
                            "Acesso à comunidade literária",
                            "Membro premium do clube",
                            "Planner anual de leituras"
                        ]}
                        ctaText="Assinar anual"
                />
            </div>
        </div>
    </div>
    <div class="absolute left-0 top-1/2 transform -translate-y-1/2 -z-10">
        <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg" class="opacity-10">
            <path d="M100 0L122.451 77.5491L200 100L122.451 122.451L100 200L77.5491 122.451L0 100L77.5491 77.5491L100 0Z" fill="currentColor" class="text-pink-light" />
        </svg>
    </div>
    <div class="absolute right-0 bottom-0 transform translate-y-1/4 translate-x-1/4 -z-10">
        <svg width="300" height="300" viewBox="0 0 300 300" fill="none" xmlns="http://www.w3.org/2000/svg" class="opacity-10">
            <circle cx="150" cy="150" r="150" fill="currentColor" class="text-blue-light" />
        </svg>
    </div>
</section>

<style>
    .animate-fade-in {
        opacity: 0;
        animation: fadeIn 1s ease-out forwards;
    }

    .animate-slide-in {
        opacity: 0;
        transform: translateY(50px);
        animation: slideIn 0.8s ease-out forwards;
        animation-delay: var(--delay, 0s);
    }

    @keyframes fadeIn {
        to { opacity: 1; }
    }

    @keyframes slideIn {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>

<script>
    function isInViewport(element) {
        const rect = element.getBoundingClientRect();
        return (
            rect.top >= 0 &&
            rect.left >= 0 &&
            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
            rect.right <= (window.innerWidth || document.documentElement.clientWidth)
        );
    }

    function handleScroll() {
        const animatedElements = document.querySelectorAll('.animate-fade-in, .animate-slide-in');
        animatedElements.forEach(element => {
            if (isInViewport(element)) {
                element.style.animationPlayState = 'running';
            }
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        handleScroll();
        window.addEventListener('scroll', handleScroll);
    });
</script>